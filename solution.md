## Инфраструктура

для формирования инфраструктры использован терраформ. терраформ по заданному плану деплоит три виртуальных машины в яндекс.облако

характеристики:
2 CPU
8 gb RAM
15 GB disk

## Кластер

Кластер сворма деплоится при помощи роли из ансибл-гэлакси, плюс используется доп. плейбук для добавления оверлей-сети для стека контейнеров.
перед деплоем небольшой скрипт из стейта терраформа формирует инвентори и немного форматирует его, добавляя необходимые значения для деплоя кластера и деплоя стека.

## Стек приложений

На каждую ноду деплоится по node-exporter и cadvisor
остальные контейнеры деплоятся в режиме репликации.

## EFK

кластер efk развернут в контейнерах. запущенные сервисы могут писать лог в fluentd используя драйвер докера
Elasticsearch и Kibana - из оф. контейнеров Elastic, Fluentd - взят с docker hub, т.к. в оригинальном контейнере флюента нету поддержки эластика.

## Реверс-прокси

вместо Nginx взят Traefik, т.к. он предназначен для работы в контейнеризованных средах.
Траефик запускается так же в стеке, и подключается к сокетам докера. после публикации он проверяет контейнеры на наличие собственных тегов, и при их наличии формирует роутинг к сервисам, согласно их доменным именам.